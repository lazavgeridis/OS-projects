
Έχω χρησημιποιήσει named semaphores, τα οποία είναι εκτός του shared memory, διότι αλλιώς αντιμετώπιζα πρόβλημα στην εκτέλεση. Επίσης, έχω υποθέσει ότι όλα τα vessels επιθυμούν να κάνουν upgrade και συγκεκριμένα: small->medium ή small->large, medium->large, large->large(για να μην βγάλω τη σημαία postype όταν εκτελείται το ./vessel). Ακόμα, το αρχείο charges δίνεται ως όρισμα στο myport και όχι στο port_master, και επίσης δεν υπάρχουν καθόλου τιμές στο config file. Το ./vessel καλείται με τα ορίσματα της εκφώνησης + άλλα 2 που είναι τα: -n vesselname. Συνολικά, για τη λύση της άσκησης έχω χρησιμοποιήσει τα εξής semaphores: 1) mutex - χρησιμοποιείται όταν κάποια διεργασία θέλει να γράψει κάτι στο shared segment. 2)port_master - χρησιμοποιείται ως μία πρώτη κοινή ουρά όπου εκεί κολλούν τα vessels όταν πρωτομπαίνουν στο λιμάνι. 3) examine - όταν ένα vessel ξυπνήσει από το sem. port_master και αφού κοινοποιήσει το χρόνο που θα "κολλήσει" σε λίγο στην ουρά που χαρακτηρίζεται από τα 2 είδη του(type, postype) κάνει V σε αυτό το semaphore για να εξετάσει την περίπτωση ο Port_master. 4)examine_entering - όταν το vessel έχει επιλεχθεί για να σταθμεύσει σε κάποια θέση, και λίγο πριν κάνει μανούβρα εισόδου, γράφει τα στοιχεία του στο shared memory και κάνει V σε αυτό το semaphore για να ξυπνήσει ο port master και να περάσει τα στοιχεία αυτά σε μία από τις δομές διαθέσιμων θέσεων. 5)examine_exiting - το ίδιο με το προηγούμενο αλλά χρησιμοποιείται κατά την έξοδο του vessel από το χώρο στάθμευσης. 6)pre_park - χρησιμοποείται για την ελεγχόμενη είσοδο των vessels στις θέσεις τους. 7)port_master_exit - μέσω αυτού του semaphore τα vessels, όταν θέλουν να αποχωρήσουν από τις θέσεις τους και να φύγουν από το λιμάνι κολλάνε σε αυτό το semaphore. 8)port_mutex - mutual exclusion για κίνηση στο λιμάνι. 9)pending_vessel - μέσου αυτού του semaphore ο port master καταλαβαίνει ότι υπάρχει αίτημα είτε για (αρχική) είσοδο στο λιμάνι, στάθμευση, αποβίβαση. 10) Τα υπόλοιπα 4 semaphores αναπαριστούν queues για τα vessels, 1 semaphore για κάθε πιθανό συνδυασμό type και postype(όπως αναφέρθκε και παραπάνω): small_medium, small_large, medium_large, large.

